; ===========================================================================
; +-----------------------------------------------------------------+
; 32X GAME BASE
; 
; Started on 16/01/2020
; +-----------------------------------------------------------------+

		include	"system/macros.asm"	; Assembler macros
		include	"system/const.asm"	; RAM / Variables are here
		include	"system/md/map.asm"	; Genesis hardware map
		include	"system/mars/map.asm"	; MARS map
		
; ====================================================================
; ----------------------------------------------------------------
; Header
; ----------------------------------------------------------------

		include	"system/head.asm"

; ====================================================================
; ----------------------------------------------------------------
; 68K CODE Section
; 
; Stored on RAM to prevent BUS fighting
; 
; or if needed: remove the RAM-copying part from head.asm and
; change $FF0000 to $880000
; ----------------------------------------------------------------

Engine_Code:
		phase $FF0000

; ====================================================================

		include "code/md.asm"

; ====================================================================

		dephase
Engine_Code_end:

	; ------------------------------------------------------------
	; Size info
	if MOMPASS=7
		message "MD CODE uses: \{Engine_Code_end-Engine_Code}"
	endif
	; ------------------------------------------------------------
	
; ====================================================================
; ----------------------------------------------------------------
; SH2 CODE for 32X
; ----------------------------------------------------------------

		align 4
MARS_RAMDATA:
; --------------------------------------------------------

		include "code/mars.asm"

; --------------------------------------------------------
		ltorg
		cpu 68000
		padding off
		dephase
MARS_RAMDATA_E:

; ====================================================================

		align 4
; 		phase $900000+*
		include "data/md_bank0.asm"
; 		dephase

; ====================================================================

		phase CS1+*
		align 4
		include "data/mars_rom.asm"
		dephase

; ====================================================================
; ---------------------------------------------
; End
; ---------------------------------------------
		
ROM_END:
		rompad (ROM_END&$FF0000)+$40000
